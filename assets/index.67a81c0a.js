var A=Object.defineProperty,I=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var F=(e,t,n)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,U=(e,t)=>{for(var n in t||(t={}))R.call(t,n)&&F(e,n,t[n]);if(C)for(var n of C(t))z.call(t,n)&&F(e,n,t[n]);return e},B=(e,t)=>I(e,D(t));import{L as $}from"./index.2a596169.js";import{R as H}from"./index.fef475e0.js";import{j as M,k as P,e as Q}from"./elements.ca95ba1c.js";import{e as q,i as G}from"./shared.99253c97.js";import{p as O,u as Z,a as E,_ as J,b as K,c as W}from"./en-US.87180fe8.js";import{_ as N}from"./elevation.9adcc0d7.js";import{d as X,r as V,x as Y,C as ee,z as te,e as c,f as ae,o as m,c as p,G as T,h as j,a as v,t as r,i as l,w as ie,m as g,q as ne,_ as oe,j as o,F as b,k as y,l as x}from"./vendor.9810b84e.js";import{C as se}from"./index.ae8b6739.js";import{T as re,a as le}from"./index.514d50e2.js";import{T as de}from"./index.bdefd8f1.js";import{T as ue}from"./index.ede49334.js";import{d as fe}from"./index.77fe3760.js";import{w as me,a as ce}from"./utils.72e4e7bc.js";import"./index.e0c8ad15.js";import"./index.a4cdafab.js";import"./index.b304b750.js";import"./components.968da630.js";import"./index.799d3505.js";import"./provide.c4137e5d.js";import"./provide.9021cd21.js";import"./index.b7e27d42.js";const ge={loading:{type:Boolean,default:!1},immediateCheck:{type:Boolean,default:!0},finished:{type:Boolean,default:!1},error:{type:Boolean,default:!1},offset:{type:[String,Number],default:0},loadingText:{type:String},finishedText:{type:String},errorText:{type:String},onLoad:{type:Function},"onUpdate:loading":{type:Function},"onUpdate:error":{type:Function}};const pe=X({name:"VarList",directives:{Ripple:H},components:{VarLoading:$},props:ge,setup(e){const t=V(null),n=V(null);let i;const h=()=>{var u,s,f;(u=e["onUpdate:error"])==null||u.call(e,!1),(s=e["onUpdate:loading"])==null||s.call(e,!0),(f=e.onLoad)==null||f.call(e)},_=()=>{const u=i===window?window.innerHeight:i.getBoundingClientRect().bottom,{bottom:s}=n.value.getBoundingClientRect();return s-Q(e.offset)<=u},d=async()=>{if(await te(),P(t.value))return;const{loading:u,finished:s,error:f}=e;!u&&!s&&!f&&_()&&h()};return Y(()=>{i=M(t.value),e.immediateCheck&&d(),i.addEventListener("scroll",d)}),ee(()=>{i.removeEventListener("scroll",d)}),{pack:O,listEl:t,detectorEl:n,dt:q,isNumber:G,load:h,check:d}}}),ve={class:"var-list var--box",ref:"listEl"},he={class:"var-list__loading"},Te={class:"var-list__loading-text"},be={class:"var-list__finished"},ke={class:"var-list__detector",ref:"detectorEl"};function _e(e,t,n,i,h,_){const d=c("var-loading"),u=ae("ripple");return m(),p("div",ve,[T(e.$slots,"default"),e.loading?T(e.$slots,"loading",{key:0},()=>[v("div",he,[v("div",Te,r(e.dt(e.loadingText,e.pack.listLoadingText)),1),l(d,{size:"mini",radius:10})])]):j("v-if",!0),e.finished?T(e.$slots,"finished",{key:1},()=>[v("div",be,r(e.dt(e.finishedText,e.pack.listFinishedText)),1)]):j("v-if",!0),e.error?T(e.$slots,"error",{key:2},()=>[ie(v("div",{class:"var-list__error",onClick:t[0]||(t[0]=(...s)=>e.load&&e.load(...s))},[g(r(e.dt(e.errorText,e.pack.listErrorText)),1)],512),[[u]])]):j("v-if",!0),v("div",ke,null,512)],512)}var k=N(pe,[["render",_e]]);k.install=function(e){e.component(k.name,k)};var Le={basicUsage:"\u57FA\u672C\u4F7F\u7528",loadFail:"\u52A0\u8F7D\u5931\u8D25",tipText:"\u63D0\u793A\u6587\u5B57",loadingText:"\u6B63\u5728\u52AA\u529B\u8F93\u51FA",errorText:"\u51FA\u9519\u4E86\u51FA\u9519\u4E86",finishedText:"\u4E00\u6EF4\u90FD\u6CA1\u6709\u4E86",listItem:"\u5217\u8868\u9879"},je={basicUsage:"Basic Usage",loadFail:"Load Fail",tipText:"Tip Text",loadingText:"loading QAQ",errorText:"error TNT",finishedText:"finished ORZ",listItem:"List Item"};const{add:w,use:ye,pack:xe,packs:We,merge:Xe}=Z(),Ce=e=>{W(e),ye(e)};E("zh-CN",J);E("en-US",K);w("zh-CN",Le);w("en-US",je);const Fe={name:"ListExample",components:{VarList:k,VarCell:se,VarTabs:re,VarTab:le,VarTabsItems:de,VarTabItem:ue},setup(){const e=ne({loading:!1,loading2:!1,loading3:!1,finished:!1,finished2:!1,finished3:!1,error:!1,list:[],list2:[],list3:[],current:0});return me(Ce),ce(fe),B(U({pack:xe},oe(e)),{load(){if(e.current!==0){e.loading=!1;return}setTimeout(()=>{for(let t=0;t<20;t++)e.list.push(e.list.length+1);e.loading=!1,e.list.length>=60&&(e.finished=!0)},1e3)},load2(){if(e.current!==1){e.loading2=!1;return}setTimeout(()=>{if(e.list2.length===40){e.error=!0,e.loading2=!1;return}for(let t=0;t<20;t++)e.list2.push(e.list2.length+1);e.loading2=!1},1e3)},load3(){if(e.current!==2){e.loading3=!1;return}setTimeout(()=>{for(let t=0;t<20;t++)e.list3.push(e.list3.length+1);e.loading3=!1,e.list3.length>=60&&(e.finished3=!0)},1e3)}})}};function Ue(e,t,n,i,h,_){const d=c("var-tab"),u=c("var-tabs"),s=c("var-cell"),f=c("var-list"),L=c("var-tab-item"),S=c("var-tabs-items");return m(),p(b,null,[l(u,{active:e.current,"onUpdate:active":t[0]||(t[0]=a=>e.current=a),sticky:"","offset-top":"54px",style:{"margin-bottom":"10px"}},{default:o(()=>[l(d,null,{default:o(()=>[g(r(i.pack.basicUsage),1)]),_:1}),l(d,null,{default:o(()=>[g(r(i.pack.loadFail),1)]),_:1}),l(d,null,{default:o(()=>[g(r(i.pack.tipText),1)]),_:1})]),_:1},8,["active"]),l(S,{active:e.current,"onUpdate:active":t[5]||(t[5]=a=>e.current=a)},{default:o(()=>[l(L,null,{default:o(()=>[l(f,{finished:e.finished,loading:e.loading,"onUpdate:loading":t[1]||(t[1]=a=>e.loading=a),onLoad:i.load},{default:o(()=>[(m(!0),p(b,null,y(e.list,a=>(m(),x(s,{key:a},{default:o(()=>[g(r(i.pack.listItem)+": "+r(a),1)]),_:2},1024))),128))]),_:1},8,["finished","loading","onLoad"])]),_:1}),l(L,null,{default:o(()=>[l(f,{finished:e.finished2,error:e.error,"onUpdate:error":t[2]||(t[2]=a=>e.error=a),loading:e.loading2,"onUpdate:loading":t[3]||(t[3]=a=>e.loading2=a),onLoad:i.load2},{default:o(()=>[(m(!0),p(b,null,y(e.list2,a=>(m(),x(s,{key:a},{default:o(()=>[g(r(i.pack.listItem)+": "+r(a),1)]),_:2},1024))),128))]),_:1},8,["finished","error","loading","onLoad"])]),_:1}),l(L,null,{default:o(()=>[l(f,{"loading-text":i.pack.loadingText,"finished-text":i.pack.finishedText,"error-text":i.pack.errorText,finished:e.finished3,loading:e.loading3,"onUpdate:loading":t[4]||(t[4]=a=>e.loading3=a),onLoad:i.load3},{default:o(()=>[(m(!0),p(b,null,y(e.list3,a=>(m(),x(s,{key:a},{default:o(()=>[g(r(i.pack.listItem)+": "+r(a),1)]),_:2},1024))),128))]),_:1},8,["loading-text","finished-text","error-text","finished","loading","onLoad"])]),_:1})]),_:1},8,["active"])],64)}var Ye=N(Fe,[["render",Ue]]);export{Ye as default};
